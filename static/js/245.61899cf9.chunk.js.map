{"version":3,"file":"static/js/245.61899cf9.chunk.js","mappings":"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","sources":["webpack://prometheus-x-course-task/./src/modules/Cart/EmptyCart/EmptyCart.module.scss?1a29","modules/Cart/EmptyCart/EmptyCart.jsx","webpack://prometheus-x-course-task/./src/modules/Cart/Cart.module.scss?310d","modules/Cart/Cart.jsx","pages/CartPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"titleEmptyCart\":\"EmptyCart_titleEmptyCart__GkiZG\",\"textEmptyCart\":\"EmptyCart_textEmptyCart__m9HLP\",\"linkBtn\":\"EmptyCart_linkBtn__s9eMf\",\"btnEmptyCart\":\"EmptyCart_btnEmptyCart__n1Cds\"};","import { Link } from 'react-router-dom';\nimport css from './EmptyCart.module.scss';\n\nconst EmptyCart = () => {\n  return (\n    <>\n      <h1 className={css.titleEmptyCart}>The cart is currently empty.</h1>\n      <p className={css.textEmptyCart}>\n        To add books to your cart, go to the books page\n      </p>\n      <Link className={css.linkBtn} to={'/books'}>\n        <button className={css.btnEmptyCart} type=\"button\">\n          Go to books page\n        </button>\n      </Link>\n    </>\n  );\n};\nexport default EmptyCart;\n","// extracted by mini-css-extract-plugin\nexport default {\"btnBought\":\"Cart_btnBought__qeFji\",\"section\":\"Cart_section__6bgIi\",\"cartItem\":\"Cart_cartItem__JZK9j\",\"cartItemTitle\":\"Cart_cartItemTitle__y-Sgq\",\"cartItemPrice\":\"Cart_cartItemPrice__0beE9\",\"cartItemCountName\":\"Cart_cartItemCountName__qpaRn\",\"cartItemBtn\":\"Cart_cartItemBtn__ys-xR\",\"cartItemCount\":\"Cart_cartItemCount__i15at\",\"cartItem_totalPrice\":\"Cart_cartItem_totalPrice__YtyV7\",\"totalPrice\":\"Cart_totalPrice__PDJI1\",\"wrapperItemTrash\":\"Cart_wrapperItemTrash__10p8u\"};","import { useSelector, useDispatch } from 'react-redux';\nimport { useState, useEffect } from 'react';\nimport { getCart } from '../../redux/books/books-selectors';\nimport { fetchCleanCart } from '../../redux/books/books-operation';\nimport {\n  putNewCountCart,\n  deleteItemCart,\n} from '../../redux/books/books-operation';\n\nimport { SvgSelector } from 'shared/components/SvgSelector/SvgSelector';\n\nimport EmptyCart from './EmptyCart/EmptyCart';\nimport css from './Cart.module.scss';\n\nconst Cart = () => {\n  const dispatch = useDispatch();\n  const isCart = useSelector(getCart);\n  const cartLocalData = localStorage.getItem('cart');\n  const [cartData, setCartData] = useState([]);\n\n  useEffect(() => {\n    const updatedCartData =\n      isCart.length > 0 ? isCart : JSON.parse(cartLocalData) || [];\n    setCartData(updatedCartData);\n  }, [isCart, cartLocalData]);\n\n  const handleIncrement = ({ id, title, count, price }) => {\n    let newCount = count < 42 ? count + 1 : 42;\n    let newTotalPrice = newCount * price;\n    dispatch(\n      putNewCountCart({\n        id: id,\n        title: title,\n        count: newCount,\n        price: price,\n        totalPrice: newTotalPrice,\n      })\n    );\n  };\n  const handleDecrement = ({ id, title, count, price }) => {\n    console.log('handleDecrement', id);\n    let newCount = count > 1 ? count - 1 : 1;\n    let newTotalPrice = newCount * price;\n    dispatch(\n      putNewCountCart({\n        id: id,\n        title: title,\n        count: newCount,\n        price: price,\n        totalPrice: newTotalPrice,\n      })\n    );\n  };\n  const handleDelete = ({ id }) => {\n    dispatch(deleteItemCart({ id: id }));\n  };\n\n  const element = cartData.map(({ id, title, price, count, totalPrice }) => {\n    return (\n      <li className={css.cartItem} key={id}>\n        <p className={css.cartItemTitle}>{title}</p>\n        <p className={css.cartItemPrice}>Price: {price} $</p>\n        <p className={css.cartItemCountName}>Count:</p>\n        <button\n          className={css.cartItemBtn}\n          onClick={() =>\n            handleDecrement({ id, title, count, price, totalPrice })\n          }\n        >\n          -\n        </button>\n        <p className={css.cartItemCount}>{count}</p>\n        <button\n          className={css.cartItemBtn}\n          onClick={() =>\n            handleIncrement({ id, title, count, price, totalPrice })\n          }\n        >\n          +\n        </button>\n        <p className={css.cartItem_totalPrice}>\n          Total price, ${totalPrice.toFixed(2)}\n        </p>\n        <div\n          className={css.wrapperItemTrash}\n          onClick={() => handleDelete({ id })}\n        >\n          <SvgSelector id=\"trash\" />\n        </div>\n      </li>\n    );\n  });\n\n  const handleCleanLocal = () => {\n    localStorage.removeItem('cart');\n    dispatch(fetchCleanCart([]));\n    setCartData([]);\n  };\n\n  const allTotal = cartData.reduce((total, { totalPrice }) => {\n    return total + totalPrice;\n  }, 0);\n  console.log('cartData', cartData);\n  return (\n    <div className={`${css.section} ${'container'}`}>\n      {cartData.length > 0 ? (\n        <>\n          <button\n            type=\"button\"\n            className={css.btnBought}\n            onClick={handleCleanLocal}\n          >\n            Purchase\n          </button>\n          <ul>{element}</ul>\n          <p className={css.totalPrice}>\n            Total price, $ {allTotal.toFixed(2)}{' '}\n          </p>\n        </>\n      ) : (\n        <EmptyCart />\n      )}\n    </div>\n  );\n};\nexport default Cart;\n","import Cart from 'modules/Cart/Cart';\n\nconst CartPage = () => {\n  return (\n    <div>\n      <Cart />\n    </div>\n  );\n};\nexport default CartPage;\n"],"names":["className","css","to","type","dispatch","useDispatch","isCart","useSelector","getCart","cartLocalData","localStorage","getItem","useState","cartData","setCartData","useEffect","updatedCartData","length","JSON","parse","element","map","id","title","price","count","totalPrice","onClick","console","log","newCount","newTotalPrice","putNewCountCart","handleDecrement","handleIncrement","toFixed","deleteItemCart","handleDelete","SvgSelector","allTotal","reduce","total","removeItem","fetchCleanCart"],"sourceRoot":""}