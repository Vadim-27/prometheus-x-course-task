{"version":3,"file":"static/js/484.5c15888c.chunk.js","mappings":"sPACA,EAA4B,wBAA5B,EAA+D,uBAA/D,EAAsG,4BAAtG,EAAkJ,4BAAlJ,EAAkM,gCAAlM,EAAgP,0BAAhP,EAA0R,4BAA1R,EAA4U,kCAA5U,EAA2X,yBAA3X,EAAua,+B,SCuHva,EA7Ga,WACX,IAAMA,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,IAAYC,EAAAA,GACrBC,EAAgBC,aAAaC,QAAQ,QAC3C,GAAgCC,EAAAA,EAAAA,UAAS,IAAzC,eAAOC,EAAP,KAAiBC,EAAjB,MAOAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EACJV,EAAOW,OAAS,EAAIX,EAASY,KAAKC,MAAMV,IAAkB,GAC5DK,EAAYE,EACb,GAAE,CAACV,EAAQG,IACX,IA+BKW,EAAUP,EAASQ,KAAI,YAA8C,IAA3CC,EAA0C,EAA1CA,GAAIC,EAAsC,EAAtCA,MAAOC,EAA+B,EAA/BA,MAAOC,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,WACvD,OACE,gBAAIC,UAAWC,EAAf,WACE,cAAGD,UAAWC,EAAd,SAAkCL,KAClC,eAAGI,UAAWC,EAAd,oBAAyCJ,EAAzC,SACA,cAAGG,UAAWC,EAAd,qBACA,mBACED,UAAWC,EACXC,QAAS,kBA1BO,SAAC,GAAiC,IAA/BP,EAA8B,EAA9BA,GAAIC,EAA0B,EAA1BA,MAAOE,EAAmB,EAAnBA,MAAOD,EAAY,EAAZA,MAC3CM,QAAQC,IAAI,kBAAmBT,GAC/B,IAAIU,EAAWP,EAAQ,EAAIA,EAAQ,EAAI,EACnCQ,EAAgBD,EAAWR,EAC/BpB,GACE8B,EAAAA,EAAAA,IAAgB,CACdZ,GAAIA,EACJC,MAAOA,EACPE,MAAOO,EACPR,MAAOA,EACPE,WAAYO,IAGjB,CAcSE,CAAgB,CAAEb,GAAAA,EAAIC,MAAAA,EAAOE,MAAAA,EAAOD,MAAAA,EAAOE,WAAAA,GADpC,EAFX,gBAQA,cAAGC,UAAWC,EAAd,SAAkCH,KAClC,mBACEE,UAAWC,EACXC,QAAS,kBAhDQ,SAAC,GAAiC,IAA/BP,EAA8B,EAA9BA,GAAIC,EAA0B,EAA1BA,MAAOE,EAAmB,EAAnBA,MAAOD,EAAY,EAAZA,MACvCQ,EAAWP,EAAQ,EACnBQ,EAAgBD,EAAWR,EAC/BpB,GACE8B,EAAAA,EAAAA,IAAgB,CACdZ,GAAIA,EACJC,MAAOA,EACPE,MAAOO,EACPR,MAAOA,EACPE,WAAYO,IAGjB,CAqCQG,CAAgB,CAAEd,GAAAA,EAAIC,MAAAA,EAAOE,MAAAA,EAAOD,MAAAA,EAAOE,WAAAA,GADpC,EAFX,gBAQA,eAAGC,UAAWC,EAAd,2BAAsDF,MACtD,gBACEC,UAAWC,EACXC,QAAS,kBA9BI,SAAC,GAAY,IAAVP,EAAS,EAATA,GACtBlB,GAASiC,EAAAA,EAAAA,IAAe,CAAEf,GAAIA,IAC/B,CA6BSgB,CAAa,CAAEhB,GAAAA,GADR,EAFX,UAME,SAACiB,EAAA,EAAD,CAAajB,GAAG,cA5BcA,EAgCrC,IAUGkB,EAAW3B,EAAS4B,QAAO,SAACC,EAAD,GAC/B,OAAOA,EADmD,EAAjBhB,UAE1C,GAAE,GAED,OACE,iBAAKC,UAAU,YAAf,WACE,mBACEgB,KAAK,SACLhB,UAAWC,EACXC,QAjBmB,WACvBnB,aAAakC,WAAW,QACxBxC,GAASyC,EAAAA,EAAAA,IAAe,KACxB/B,EAAY,GACb,EAUG,uBAOA,wBAAKM,KACL,eAAGO,UAAWC,EAAd,4BAA8CY,EAA9C,SAGL,EC9GD,EAPiB,WACf,OACE,0BACE,SAAC,EAAD,KAGL,C","sources":["webpack://prometheus-x-course-task/./src/modules/Cart/Cart.module.scss?310d","modules/Cart/Cart.jsx","pages/CartPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"btnBought\":\"Cart_btnBought__qeFji\",\"cartItem\":\"Cart_cartItem__JZK9j\",\"cartItemTitle\":\"Cart_cartItemTitle__y-Sgq\",\"cartItemPrice\":\"Cart_cartItemPrice__0beE9\",\"cartItemCountName\":\"Cart_cartItemCountName__qpaRn\",\"cartItemBtn\":\"Cart_cartItemBtn__ys-xR\",\"cartItemCount\":\"Cart_cartItemCount__i15at\",\"cartItem_totalPrice\":\"Cart_cartItem_totalPrice__YtyV7\",\"totalPrice\":\"Cart_totalPrice__PDJI1\",\"wrapperItemTrash\":\"Cart_wrapperItemTrash__10p8u\"};","import { useSelector, useDispatch } from \"react-redux\";\nimport { useState, useEffect } from \"react\";\nimport { getCart } from \"../../redux/books/books-selectors\";\nimport { fetchCleanCart } from \"../../redux/books/books-operation\";\nimport { putNewCountCart, deleteItemCart } from \"../../redux/books/books-operation\";\n\nimport { SvgSelector } from \"shared/components/SvgSelector/SvgSelector\";\n\nimport css from './Cart.module.scss';\n\n\nconst Cart = () => {\n  const dispatch = useDispatch();\n  const isCart = useSelector(getCart);\n  const cartLocalData = localStorage.getItem('cart');\n  const [cartData, setCartData] = useState([]);\n  // const [quantity, setQuantity] = useState({\n  //   count: 1,\n  //   totalPrice: price,\n  // });\n\n\n  useEffect(() => {\n    const updatedCartData =\n      isCart.length > 0 ? isCart : JSON.parse(cartLocalData) || [];\n    setCartData(updatedCartData);\n  }, [isCart, cartLocalData]);\n   const handleIncrement = ({ id, title, count, price }) => {\n     let newCount = count + 1;\n     let newTotalPrice = newCount * price;\n     dispatch(\n       putNewCountCart({\n         id: id,\n         title: title,\n         count: newCount,\n         price: price,\n         totalPrice: newTotalPrice,\n       })\n     );\n   };\n  const handleDecrement = ({ id, title, count, price }) => {\n    console.log('handleDecrement', id);\n    let newCount = count > 1 ? count - 1 : 1;;\n    let newTotalPrice = newCount * price;\n    dispatch(\n      putNewCountCart({\n        id: id,\n        title: title,\n        count: newCount,\n        price: price,\n        totalPrice: newTotalPrice,\n      })\n    );\n  };\n  const handleDelete = ({ id }) => {\n    dispatch(deleteItemCart({ id: id }));\n  }\n\n  const element = cartData.map(({ id, title, price, count, totalPrice }) => {\n    return (\n      <li className={css.cartItem} key={id}>\n        <p className={css.cartItemTitle}>{title}</p>\n        <p className={css.cartItemPrice}>Price: {price} $</p>\n        <p className={css.cartItemCountName}>Count:</p>\n        <button\n          className={css.cartItemBtn}\n          onClick={() =>\n            handleDecrement({ id, title, count, price, totalPrice })\n          }\n        >\n          -\n        </button>\n        <p className={css.cartItemCount}>{count}</p>\n        <button\n          className={css.cartItemBtn}\n          onClick={() =>\n            handleIncrement({ id, title, count, price, totalPrice })\n          }\n        >\n          +\n        </button>\n        <p className={css.cartItem_totalPrice}>Total price, ${totalPrice}</p>\n        <div\n          className={css.wrapperItemTrash}\n          onClick={() =>\n            handleDelete({ id })\n          }\n        >\n          <SvgSelector id=\"trash\" />\n        </div>\n      </li>\n    );\n  })\n\n  const handleCleanLocal = () => {\n    localStorage.removeItem('cart');\n    dispatch(fetchCleanCart([]));\n    setCartData([]);\n  }\n\n\n\nconst allTotal = cartData.reduce((total, { totalPrice }) => {\n  return total + totalPrice;\n}, 0);\n\n  return (\n    <div className=\"container\">\n      <button\n        type=\"button\"\n        className={css.btnBought}\n        onClick={handleCleanLocal}\n      >\n        Purchase\n      </button>\n      <ul>{element}</ul>\n      <p className={css.totalPrice}>Total price, $ {allTotal} </p>\n    </div>\n  );\n};\nexport default Cart;\n\n","import Cart from 'modules/Cart/Cart';\n\nconst CartPage = () => {\n  return (\n    <div>\n      <Cart />\n    </div>\n  );\n};\nexport default CartPage;\n"],"names":["dispatch","useDispatch","isCart","useSelector","getCart","cartLocalData","localStorage","getItem","useState","cartData","setCartData","useEffect","updatedCartData","length","JSON","parse","element","map","id","title","price","count","totalPrice","className","css","onClick","console","log","newCount","newTotalPrice","putNewCountCart","handleDecrement","handleIncrement","deleteItemCart","handleDelete","SvgSelector","allTotal","reduce","total","type","removeItem","fetchCleanCart"],"sourceRoot":""}